<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="style.css" />
  <script src="config.js"></script>
</head>
<body>

  <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞ üîê</h1>

  <input id="keyInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á" style="padding:10px; font-size:18px;">
  <br><br>

  <button onclick="checkKey()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>

  <p id="msg" style="color:red"></p>

<script>
async function checkKey() {
  const key = document.getElementById("keyInput").value;
  const res = await fetch(window.API_URL + "/check", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ key }),
  });

  const data = await res.json();

  if (!data.ok) {
    document.getElementById("msg").innerText = "–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á!";
    return;
  }

  localStorage.setItem("gift", JSON.stringify(data.gift));
  window.location = "gift.html";
}
</script>

</body>
</html>